import"./modulepreload-polyfill-3cfb730f.js";let a=JSON.parse(localStorage.getItem("carrito"))||[];const J=document.getElementById("cart-desktop"),j=document.getElementById("cart-mobile"),E=document.getElementById("carrito-popup"),q=document.getElementById("cerrar-carrito");J.addEventListener("click",()=>{E.classList.add("open"),s()});j.addEventListener("click",()=>{E.classList.add("open"),s()});q.addEventListener("click",()=>{E.classList.remove("open")});function s(){const n=document.getElementById("carrito-contenido");n.innerHTML="",a.length===0&&(n.innerHTML="<p>No hay productos en el carrito.</p>");let t=0;a.forEach((o,d)=>{const r=document.createElement("div");r.classList.add("carrito-item"),r.innerHTML=`
            <img src="${o.imagen}" alt="${o.nombre}">
            <div class="nombre">${o.nombre}</div>
            <div class="precio">${o.precio.toLocaleString("es-CL",{maximumFractionDigits:0})} CLP</div>
            <div class="eliminar" data-index="${d}">❌</div>
        `,n.appendChild(r),t+=o.precio}),document.getElementById("total-precio").textContent=t.toLocaleString("es-CL",{maximumFractionDigits:0}),document.querySelectorAll(".carrito-item .eliminar").forEach(o=>{o.addEventListener("click",d=>{const r=d.target.getAttribute("data-index");a.splice(r,1),localStorage.setItem("carrito",JSON.stringify(a)),s()})})}document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("hamburguer-menu"),t=document.getElementById("close-menu"),c=document.getElementById("hamburguer-menu-list");n.addEventListener("click",function(){c.classList.remove("hidden")}),t.addEventListener("click",function(){c.classList.add("hidden")}),c.addEventListener("click",function(o){o.target===c&&c.classList.add("hidden")})});document.getElementById("vaciar-carrito").addEventListener("click",()=>{a=[],localStorage.setItem("carrito",JSON.stringify(a)),s()});function U(n){a.push(n),localStorage.setItem("carrito",JSON.stringify(a)),s(),G()}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("agregar-carrito");n&&n.addEventListener("click",R)});function R(){const n=document.getElementById("nombre-producto").textContent,t=document.getElementById("precio-producto").textContent,c=document.getElementById("producto-imagen").src;console.log("",t);const o=Y(t);U({nombre:n,precio:o,imagen:c})}document.querySelector("#carrito-popup .checkout-btn").addEventListener("click",()=>{window.location.href="/checkout.html"});function Y(n){const t=n.replace(/[^\d]/g,"");return parseFloat(t)}function G(){const n=document.getElementById("notificacion-carrito");n.classList.remove("show"),setTimeout(()=>{n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},3e3)},100)}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("notificacion-carrito");n&&n.classList.remove("show");const t=new URLSearchParams(window.location.search);console.log(t.toString());const c=t.get("nombre"),o=t.get("precio"),d=t.get("imagen");t.get("partOf");const r=t.get("mainType"),$=t.get("descripcion"),T=t.get("fecha"),M=t.get("out"),L=t.get("mensajeSalida"),g=t.get("rareza"),N=t.get("partede"),y=t.get("imgbundle"),m=t.get("imgbundle2"),l=t.get("imgbundle3"),u=t.get("imgbundle4"),B=document.getElementById("nombre-producto"),I=document.getElementById("precio-producto"),h=document.getElementById("producto-imagen"),b=document.getElementById("descripcion-producto"),C=document.getElementById("mainType"),S=document.getElementById("rareza"),v=document.getElementById("partede"),p=document.getElementById("producto-imagenes"),P=x(T);document.getElementById("fecha-inicio").textContent=`Llegó a la tienda: ${P}`;const w=x(M);document.getElementById("fecha-salida").textContent=`Se va de la tienda: ${w}`,L&&(document.getElementById("mensaje-salida").textContent=L);function x(i){const e=new Date(i),D=String(e.getDate()).padStart(2,"0"),O=String(e.getMonth()+1).padStart(2,"0"),z=e.getFullYear(),F=String(e.getHours()).padStart(2,"0"),H=String(e.getMinutes()).padStart(2,"0"),A=String(e.getSeconds()).padStart(2,"0");return`${D}-${O}-${z} ${F}:${H}:${A}`}B&&(B.textContent=c),I&&(I.innerHTML=`<span>$${(o*4.9).toLocaleString("es-CL")} CLP</span>`),h&&(h.src=d),b&&(b.textContent=$||"Descripción no disponible."),C&&(C.textContent=r||"No especificado"),S&&(S.textContent=g),v&&(v.textContent=N);const f=document.getElementById("rareza-badge");f&&g&&(f.textContent=g.toUpperCase(),f.style.display="block");const k=document.getElementById("bundle-section");if(p){p.innerHTML="";const i=[];if(y){const e=document.createElement("img");e.id="imagen1",e.src=y,e.alt="Imagen del producto - Bundle 1",e.classList.add("producto-imagen-lote"),i.push(e)}if(m&&m!=="undefined"&&m!==""){const e=document.createElement("img");e.id="imagen2",e.src=m,e.alt="Imagen del producto - Bundle 2",e.classList.add("producto-imagen-lote"),i.push(e)}if(l&&l!=="undefined"&&l!==""){const e=document.createElement("img");e.id="imagen3",e.src=l,e.alt="Imagen del producto - Bundle 3",e.classList.add("producto-imagen-lote"),i.push(e)}if(u&&u!=="undefined"&&u!==""){const e=document.createElement("img");e.id="imagen4",e.src=u,e.alt="Imagen del producto - Bundle 4",e.classList.add("producto-imagen-lote"),i.push(e)}i.length>0?(k.style.display="block",i.forEach(e=>{p.appendChild(e)})):k.style.display="none"}});
