import"./modulepreload-polyfill-3cfb730f.js";let a=JSON.parse(localStorage.getItem("carrito"))||[];const A=document.getElementById("cart-desktop"),J=document.getElementById("cart-mobile"),p=document.getElementById("carrito-popup"),j=document.getElementById("cerrar-carrito");A.addEventListener("click",()=>{p.classList.add("open"),s()});J.addEventListener("click",()=>{p.classList.add("open"),s()});j.addEventListener("click",()=>{p.classList.remove("open")});function s(){const e=document.getElementById("carrito-contenido");e.innerHTML="",a.length===0&&(e.innerHTML="<p>No hay productos en el carrito.</p>");let o=0;a.forEach((n,d)=>{const r=document.createElement("div");r.classList.add("carrito-item"),r.innerHTML=`
            <img src="${n.imagen}" alt="${n.nombre}">
            <div class="nombre">${n.nombre}</div>
            <div class="precio">${n.precio.toLocaleString("es-CL",{maximumFractionDigits:0})} CLP</div>
            <div class="eliminar" data-index="${d}">❌</div>
        `,e.appendChild(r),o+=n.precio}),document.getElementById("total-precio").textContent=o.toLocaleString("es-CL",{maximumFractionDigits:0}),document.querySelectorAll(".carrito-item .eliminar").forEach(n=>{n.addEventListener("click",d=>{const r=d.target.getAttribute("data-index");a.splice(r,1),localStorage.setItem("carrito",JSON.stringify(a)),s()})})}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("hamburguer-menu"),o=document.getElementById("close-menu"),c=document.getElementById("hamburguer-menu-list");e.addEventListener("click",function(){c.classList.remove("hidden")}),o.addEventListener("click",function(){c.classList.add("hidden")}),c.addEventListener("click",function(n){n.target===c&&c.classList.add("hidden")})});document.getElementById("vaciar-carrito").addEventListener("click",()=>{a=[],localStorage.setItem("carrito",JSON.stringify(a)),s()});function q(e){a.push(e),localStorage.setItem("carrito",JSON.stringify(a)),s(),Y()}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("agregar-carrito");e&&e.addEventListener("click",R)});function R(){const e=document.getElementById("nombre-producto").textContent,o=document.getElementById("precio-producto").textContent,c=document.getElementById("producto-imagen").src;console.log("",o);const n=U(o);q({nombre:e,precio:n,imagen:c})}document.querySelector("#carrito-popup .total button").addEventListener("click",()=>{window.location.href="/checkout.html"});function U(e){const o=e.replace(/[^\d]/g,"");return parseFloat(o)}function Y(){const e=document.getElementById("notificacion-carrito");e.classList.remove("hidden"),e.classList.add("opacity-100"),setTimeout(()=>{e.classList.add("hidden"),e.classList.remove("opacity-100")},2e3)}document.addEventListener("DOMContentLoaded",()=>{const e=new URLSearchParams(window.location.search);console.log(e.toString());const o=e.get("nombre"),c=e.get("precio"),n=e.get("imagen"),d=e.get("partOf"),r=e.get("mainType"),x=e.get("descripcion"),$=e.get("fecha"),k=e.get("out"),f=e.get("mensajeSalida"),N=e.get("rareza"),O=e.get("partede"),E=e.get("imgbundle"),m=e.get("imgbundle2"),l=e.get("imgbundle3"),u=e.get("imgbundle4"),L=document.getElementById("nombre-producto"),y=document.getElementById("precio-producto"),I=document.getElementById("producto-imagen"),B=document.getElementById("descripcion-producto"),h=document.getElementById("partOf"),C=document.getElementById("mainType"),S=document.getElementById("rareza"),b=document.getElementById("partede"),g=document.getElementById("producto-imagenes"),P=v($);document.getElementById("fecha-inicio").textContent=`Llegó a la tienda: ${P}`;const M=v(k);document.getElementById("fecha-salida").textContent=`Se va de la tienda: ${M}`,f&&(document.getElementById("mensaje-salida").textContent=f);function v(i){const t=new Date(i),T=String(t.getDate()).padStart(2,"0"),D=String(t.getMonth()+1).padStart(2,"0"),F=t.getFullYear(),w=String(t.getHours()).padStart(2,"0"),H=String(t.getMinutes()).padStart(2,"0"),z=String(t.getSeconds()).padStart(2,"0");return`${T}-${D}-${F} ${w}:${H}:${z}`}if(L&&(L.textContent=o),y&&(y.innerHTML=`Precio: <span>$${(c*4.9).toLocaleString("es-CL")} CLP</span>`),I&&(I.src=n),B&&(B.textContent=x||"Descripción no disponible."),h&&(h.textContent=d||"No especificado"),C&&(C.textContent=r||"No especificado"),S&&(S.textContent=N),b&&(b.textContent=O),g){g.innerHTML="";const i=[];if(E){const t=document.createElement("img");t.id="imagen1",t.src=E,t.alt="Imagen del producto - Bundle 1",t.classList.add("producto-imagen-lote"),i.push(t)}if(m&&m!=="undefined"&&m!==""){const t=document.createElement("img");t.id="imagen2",t.src=m,t.alt="Imagen del producto - Bundle 2",t.classList.add("producto-imagen-lote"),i.push(t)}if(l&&l!=="undefined"&&l!==""){const t=document.createElement("img");t.id="imagen3",t.src=l,t.alt="Imagen del producto - Bundle 3",t.classList.add("producto-imagen-lote"),i.push(t)}if(u&&u!=="undefined"&&u!==""){const t=document.createElement("img");t.id="imagen4",t.src=u,t.alt="Imagen del producto - Bundle 4",t.classList.add("producto-imagen-lote"),i.push(t)}i.length>0&&i.forEach(t=>{g.appendChild(t)})}});
