import"./modulepreload-polyfill-3cfb730f.js";let a=JSON.parse(localStorage.getItem("carrito"))||[];const j=document.getElementById("cart-desktop"),q=document.getElementById("cart-mobile"),L=document.getElementById("carrito-popup"),U=document.getElementById("cerrar-carrito");j.addEventListener("click",()=>{L.classList.add("open"),s()});q.addEventListener("click",()=>{L.classList.add("open"),s()});U.addEventListener("click",()=>{L.classList.remove("open")});function s(){const n=document.getElementById("carrito-contenido");n.innerHTML="",a.length===0&&(n.innerHTML="<p>No hay productos en el carrito.</p>");let t=0;a.forEach((o,d)=>{const r=document.createElement("div");r.classList.add("carrito-item"),r.innerHTML=`
            <img src="${o.imagen}" alt="${o.nombre}">
            <div class="nombre">${o.nombre}</div>
            <div class="precio">${o.precio.toLocaleString("es-CL",{maximumFractionDigits:0})} CLP</div>
            <div class="eliminar" data-index="${d}">❌</div>
        `,n.appendChild(r),t+=o.precio}),document.getElementById("total-precio").textContent=t.toLocaleString("es-CL",{maximumFractionDigits:0}),document.querySelectorAll(".carrito-item .eliminar").forEach(o=>{o.addEventListener("click",d=>{const r=d.target.getAttribute("data-index");a.splice(r,1),localStorage.setItem("carrito",JSON.stringify(a)),s()})})}document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("hamburguer-menu"),t=document.getElementById("close-menu"),c=document.getElementById("hamburguer-menu-list");n.addEventListener("click",function(){c.classList.remove("hidden")}),t.addEventListener("click",function(){c.classList.add("hidden")}),c.addEventListener("click",function(o){o.target===c&&c.classList.add("hidden")})});document.getElementById("vaciar-carrito").addEventListener("click",()=>{a=[],localStorage.setItem("carrito",JSON.stringify(a)),s()});function R(n){a.push(n),localStorage.setItem("carrito",JSON.stringify(a)),s(),K()}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("agregar-carrito");n&&n.addEventListener("click",Y)});function Y(){const n=document.getElementById("nombre-producto").textContent,t=document.getElementById("precio-producto").textContent,c=document.getElementById("producto-imagen").src;console.log("",t);const o=G(t);R({nombre:n,precio:o,imagen:c})}document.querySelector("#carrito-popup .checkout-btn").addEventListener("click",()=>{window.location.href="/checkout.html"});function G(n){const t=n.replace(/[^\d]/g,"");return parseFloat(t)}function K(){const n=document.getElementById("notificacion-carrito");n.classList.remove("show"),setTimeout(()=>{n.classList.add("show"),setTimeout(()=>{n.classList.remove("show")},3e3)},100)}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("notificacion-carrito");n&&n.classList.remove("show");const t=new URLSearchParams(window.location.search);console.log(t.toString());const c=t.get("nombre"),o=t.get("precio"),d=t.get("imagen");t.get("partOf");const r=t.get("mainType"),$=t.get("descripcion"),T=t.get("fecha"),M=t.get("out"),y=t.get("mensajeSalida"),p=t.get("rareza"),N=t.get("partede"),B=t.get("imgbundle"),m=t.get("imgbundle2"),l=t.get("imgbundle3"),u=t.get("imgbundle4"),P=t.get("colorFondo"),I=document.getElementById("nombre-producto"),h=document.getElementById("precio-producto"),g=document.getElementById("producto-imagen"),b=document.getElementById("descripcion-producto"),C=document.getElementById("mainType"),S=document.getElementById("rareza"),v=document.getElementById("partede"),f=document.getElementById("producto-imagenes"),w=x(T);document.getElementById("fecha-inicio").textContent=`Llegó a la tienda: ${w}`;const D=x(M);document.getElementById("fecha-salida").textContent=`Se va de la tienda: ${D}`,y&&(document.getElementById("mensaje-salida").textContent=y);function x(i){const e=new Date(i),F=String(e.getDate()).padStart(2,"0"),O=String(e.getMonth()+1).padStart(2,"0"),z=e.getFullYear(),H=String(e.getHours()).padStart(2,"0"),A=String(e.getMinutes()).padStart(2,"0"),J=String(e.getSeconds()).padStart(2,"0");return`${F}-${O}-${z} ${H}:${A}:${J}`}I&&(I.textContent=c),h&&(h.innerHTML=`<span>$${(o*4.4).toLocaleString("es-CL")} CLP</span>`),g&&(g.src=d),b&&(b.textContent=$||"Descripción no disponible."),C&&(C.textContent=r||"No especificado"),S&&(S.textContent=p),v&&(v.textContent=N),g&&(g.style.backgroundColor=P);const E=document.getElementById("rareza-badge");E&&p&&(E.textContent=p.toUpperCase(),E.style.display="block");const k=document.getElementById("bundle-section");if(f){f.innerHTML="";const i=[];if(B){const e=document.createElement("img");e.id="imagen1",e.src=B,e.alt="Imagen del producto - Bundle 1",e.classList.add("producto-imagen-lote"),i.push(e)}if(m&&m!=="undefined"&&m!==""){const e=document.createElement("img");e.id="imagen2",e.src=m,e.alt="Imagen del producto - Bundle 2",e.classList.add("producto-imagen-lote"),i.push(e)}if(l&&l!=="undefined"&&l!==""){const e=document.createElement("img");e.id="imagen3",e.src=l,e.alt="Imagen del producto - Bundle 3",e.classList.add("producto-imagen-lote"),i.push(e)}if(u&&u!=="undefined"&&u!==""){const e=document.createElement("img");e.id="imagen4",e.src=u,e.alt="Imagen del producto - Bundle 4",e.classList.add("producto-imagen-lote"),i.push(e)}i.length>0?(k.style.display="block",i.forEach(e=>{f.appendChild(e)})):k.style.display="none"}});
